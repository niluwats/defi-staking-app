{"ast":null,"code":"import _classCallCheck from \"D:\\\\truff\\\\defi-staking-app-starter\\\\defi-staking-app-starter\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\truff\\\\defi-staking-app-starter\\\\defi-staking-app-starter\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport { Stream } from '../../../stream/Stream.js';\nimport { cloneMethod, hasCloneMethod } from '../../symbols.js';\nexport var Shrinkable = /*#__PURE__*/function () {\n  function Shrinkable(value_) {\n    var shrink = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {\n      return Stream.nil();\n    };\n    var customGetValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n\n    _classCallCheck(this, Shrinkable);\n\n    this.value_ = value_;\n    this.shrink = shrink;\n    this.hasToBeCloned = customGetValue !== undefined || hasCloneMethod(value_);\n    this.readOnce = false;\n\n    if (this.hasToBeCloned) {\n      Object.defineProperty(this, 'value', {\n        get: customGetValue !== undefined ? customGetValue : this.getValue\n      });\n    } else {\n      this.value = value_;\n    }\n  }\n\n  _createClass(Shrinkable, [{\n    key: \"getValue\",\n    value: function getValue() {\n      if (!this.readOnce) {\n        this.readOnce = true;\n        return this.value_;\n      }\n\n      return this.value_[cloneMethod]();\n    }\n  }, {\n    key: \"applyMapper\",\n    value: function applyMapper(mapper) {\n      var _this = this;\n\n      if (this.hasToBeCloned) {\n        var out = mapper(this.value);\n\n        if (out instanceof Object) {\n          out[cloneMethod] = function () {\n            return _this.applyMapper(mapper);\n          };\n        }\n\n        return out;\n      }\n\n      return mapper(this.value);\n    }\n  }, {\n    key: \"map\",\n    value: function map(mapper) {\n      var _this2 = this;\n\n      return new Shrinkable(this.applyMapper(mapper), function () {\n        return _this2.shrink().map(function (v) {\n          return v.map(mapper);\n        });\n      });\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(refinement) {\n      var _this3 = this;\n\n      var refinementOnShrinkable = function refinementOnShrinkable(s) {\n        return refinement(s.value_);\n      };\n\n      return new Shrinkable(this.value, function () {\n        return _this3.shrink().filter(refinementOnShrinkable).map(function (v) {\n          return v.filter(refinement);\n        });\n      });\n    }\n  }]);\n\n  return Shrinkable;\n}();","map":null,"metadata":{},"sourceType":"module"}